@(item: AccessibleEntity, accessor: Accessor, perms: GlobalPermissionSet[Accessor], contentTypes: Seq[ContentType.Value], action: Call)(implicit user: UserProfile, req: RequestHeader, lang: Lang)

@main(Messages("actions.grantPermissionsInScope", item, accessor))(Some(user), req) {
	
  
	<h2>@Messages("actions.grantPermissionsInScope", item.identifier, accessor.name)</h2>
	@helper.form(action = action, 'class -> "entity-form form-horizontal") {
		<fieldset id="permissionScope-area">

        <table class="permissions-matrix">
        <tr>
        <th></th>
        @PermissionType.values.toList.map { perm =>
            <th>@perm.toString</th>
        }
        </tr>
        @contentTypes.map { ct =>
            <tr>
                <td>@Messages("contentTypes." + ct)</td>
                @PermissionType.values.toList.map { perm =>
                    <td>
                    @defining(perms.get(ct, perm)) { permOpt =>
                        <input type="checkbox" name="@ct" value="@perm"
                        @if(permOpt.isDefined && permOpt.flatMap(_.inheritedFrom).isEmpty) {
                            checked
                        } />
                        @permOpt.flatMap(_.inheritedFrom).map { user =>
                            <span title="@Messages("permissions.inheritedFrom", user.name)">*</span>
                        }
                    }
                    </td>
                }
            </tr>
        }
    </table>


		</fieldset>
	  
		<div class="form-actions">
			<button type="submit" class="btn btn-primary">@Messages("actions.updatePermissions")</button>
		</div>
	}
}