@(item: AccessibleEntity, accessor: Accessor, perms: GlobalPermissionSet[Accessor], contentTypes: Seq[ContentType.Value], action: Call)(
    implicit userOpt: Option[UserProfile], req: RequestHeader, lang: Lang, flash: Flash, token: play.filters.csrf.CSRF.Token)
@import defines.PermissionType

@rightSidebarLayout(Messages("actions.grantPermissionsInScope", item, accessor), breadcrumbs = common.breadcrumbs(List(item))) {
	
	@helper.form(action = action, 'class -> "entity-form form-horizontal") {
        @formHelpers.csrfToken()
		<fieldset id="permissionScope-area">

        <table class="table table-bordered permissions-matrix">
        <tr>
        <th></th>
        @PermissionType.values.toList.map { perm =>
            <th>@Messages("permissionTypes." + perm.toString)</th>
        }
        </tr>
        @contentTypes.map { ct =>
            <tr>
                <td>@Messages("contentTypes." + ct)</td>
                @PermissionType.values.toList.map { perm =>
                    <td>
                    @defining(perms.get(ct, perm)) { permOpt =>
                        <input type="checkbox" name="@ct" value="@perm"
                        @if(permOpt.isDefined && permOpt.flatMap(_.inheritedFrom).isEmpty) {
                            checked
                        } />
                        @permOpt.flatMap(_.inheritedFrom).map { user =>
                            <span title="@Messages("permissions.inheritedFrom", user)">*</span>
                        }
                    }
                    </td>
                }
            </tr>
        }
    </table>


		</fieldset>
	  
		<div class="form-actions">
			<button type="submit" class="btn btn-primary">@Messages("actions.updatePermissions")</button>
		</div>
	}
} {

}
