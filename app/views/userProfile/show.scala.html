@(item: UserProfile, annotations: Map[String,List[Annotation]])(implicit maybeUser: Option[UserProfile], req: RequestHeader, lang: Lang, flash: Flash)

@main(item.name)(maybeUser, req) {

    @common.annotated(item, annotations) {

        <h3>User: @item.name (@item.identifier)</h3>

        @common.descriptionValue(Some(item.property("location").flatMap(_.asOpt[String]).getOrElse(Messages("profile.noLocationGiven"))), Messages("profile.location"))
        @* @common.descriptionValue(if (item.languages.mkString(", ").isEmpty) None else Some(item.languages.mkString(", ")), Messages("profile.languages")) *@
        @* @common.descriptionValue(Some(item.about.getOrElse(Messages("profile.noBioGiven"))), Messages("profile.about")) *@

    }

	<hr />
	@if(item.groups.isEmpty) {
	  <i>@Messages("accessor.notInAnyGroups")</i>
	} else {
	  <strong>Groups: </strong>&nbsp;
	  @item.groups.map { group =>
	    <a href="@routes.Groups.get(group.id)">@group.name</a>
	  }	  
	}

    <hr />
	@common.visibility(item)

    <ul class="item-actions">
        <li><a href="@routes.UserProfiles.list()">@Messages("Back to List")</a></li>
        @maybeUser.map { user =>
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Update)) {
              <li><a href="@routes.UserProfiles.update(item.id)">@Messages("Modify Profile")</a></li>
            }
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Update)) {
              <li><a href="@routes.UserProfiles.visibility(item.id)">@Messages("Set Visibility")</a></li>
            }
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Grant)) {
              <li><a href="@routes.UserProfiles.permissions(item.id)">@Messages("Modify Permissions")</a></li>
              <li><a href="@routes.UserProfiles.grantList(item.id)">@Messages("actions.listPermissionGrants")</a></li>
            }
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Grant)) {
              <li><a href="@routes.Groups.membership(item.isA.toString, item.id)">@Messages("Add/Remove Parent Groups")</a></li>
            }
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Delete)) {
              <li><a href="@routes.UserProfiles.delete(item.id)">@Messages("Delete User")</a></li>
            }
            @if(user.hasPermission(ContentType.UserProfile, PermissionType.Grant)) {
              <li><a href="@routes.UserProfiles.managePermissions(item.id)">@Messages("actions.managePermissions")</a></li>
            }
            <li><a href="@routes.ActionLogs.historyFor(item.id)">@Messages("actions.showHistory")</a></li>
        }
    </ul>

}