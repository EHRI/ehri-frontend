@(result: solr.ItemPage[Entity], params: solr.SearchParams, facets: List[solr.facet.AppliedFacet], action: Call, showAction: String => Call)(implicit userOpt: Option[UserProfile], req: RequestHeader, lang: Lang, flash: Flash)

@rightSidebarLayout(Messages("forms.search")) {
	@helper.form(action = action, 'class -> "form-search") {
        <div class="controls-row">
            <input type="text" class="span10 search-query" name="q" value="@params.query" />
            <button type="submit" class="btn">@Messages("forms.search")</button>
        </div>

        <p>
            @common.selectedFacets(result)
        </p>

        <h3>@Messages("pagination.displayingItems", result.offset + 1, result.offset + result.items.size, result.total)</h3>

        @common.pagination(result)
		<ul class="unstyled">
		@views.Helpers.condenseMultipleDescriptions(result.items).map { item =>
            <li>
                @item.isA match {

                    case EntityType.DocumentaryUnit => {
                        @documentaryUnit.searchItem(DocumentaryUnit(item))
                    }
                    case EntityType.Agent => {
                        @repository.searchItem(Repository(item))
                    }
                    case EntityType.Concept => {
                        @concept.searchItem(Concept(item))
                    }
                    case EntityType.UserProfile => {
                        @userProfile.searchItem(UserProfile(item))
                    }
                    case EntityType.Group => {
                        @group.searchItem(Group(item))
                    }
                    case EntityType.Vocabulary => {
                        @vocabulary.searchItem(Vocabulary(item))
                    }
                    case _ => {
                        @common.searchItem(item)
                    }
                }
            </li>
		}
		</ul>
	}
} {
    @common.facetList(result.facets, action)
}