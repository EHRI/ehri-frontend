@**
* Render annotation comments around some HTML content
*
*@
@(item: AccessibleEntity, annotations: Map[String,List[Annotation]], url: Call)(body: Html)(implicit maybeUser: Option[UserProfile], req: RequestHeader)

@annotationList(notes: List[Annotation]) = {
    @if(!notes.isEmpty) {
        <ul>
        @notes.map { ann =>
            <li class="annotatable" id="@ann.id">
                @ann.accessor.map { accessor =>
                    <a href="@views.Helpers.urlFor(accessor)">@accessor.name</a> -
                }
                @ann.stringProperty(AnnotationF.BODY).map { body =>
                    @body.trim
                }
                <a href="@routes.Annotations.annotate(ann.id)?annotationType=comment">+</a>
                @if(!ann.annotations.isEmpty) {
                    @{println("ANN: " + ann.annotations)}
                    @annotationList(ann.annotations)
                }
            </li>
        }
        </ul>

    }
}

<div class="annotatable" id="@item.id">
    <a href="@url?annotationType=comment">+@Messages("actions.annotateThisItem")</a>
    @body
    @annotations.get(item.id).map { list =>
        @if(!list.isEmpty) {
            <hr />
            <div class="item-annotations">
                @annotationList(list)
            </div>
        }
    }
</div>