@(result: utils.search.ItemPage[(AnyModel,utils.search.SearchHit)], params: utils.search.SearchParams, action: Call, autofocus: Boolean = false)(html: Html)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, lang: Lang, flash: Flash)

@import utils.search.{SearchParams,SearchOrder}

@helper.form(action = action, 'class -> "") {
<div class="row">
    <div class="col-md-12">
        <div class="input-group">
            <input type="text"
                    placeholder="@Messages("search.queryPlaceholder")"
                    class="form-control" name="@SearchParams.QUERY" value="@params.query" @{if(autofocus) "autofocus"} />
            <span class="input-group-btn">
                 <button class="btn btn-default">
                    <i class="glyphicon glyphicon-search"></i>
                     @Messages("forms.search")
                </button>
            </span>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <h4>
            @Messages("pagination.displayingItems", result.offset + 1, result.offset + result.items.size, result.total)

            @result.spellcheck.map { case (actual, corrected) =>
                @defining(params.query.map(_.toLowerCase.replace(actual.toLowerCase, corrected))) { suggestion =>
                    (@Messages("search.spellingSuggestion")
                    <i>
                        <strong>
                            <a href="@utils.joinPath(req.path, req.queryString.updated(SearchParams.QUERY, suggestion.toSeq))">@suggestion</a>
                    </strong>
                    </i>?)
                }
            }
        </h4>
    </div>
    <div class="col-md-6">
        <div class="btn-group btn-group-xs pull-right" style="margin-top: 10px">
        @List(SearchOrder.Score, SearchOrder.Name, SearchOrder.DateNewest).map { sortKey =>
            @if(params.sort.equals(Some(sortKey))) {
                <a class="btn btn-xs btn-default btn-active current-search-sort" href="@utils.joinPath(req.path, req.queryString.filterKeys(_ != SearchParams.SORT))">
                    @Messages("search." + sortKey)
                </a>
            } else {
                <a class="btn btn-default btn-xs" href="@utils.joinPath(req.path, req.queryString.updated(SearchParams.SORT, Seq(sortKey.toString)))">
                    @Messages("search." + sortKey)
                </a>
            }
        }
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <p>
            @common.selectedFacets(result)
        </p>
    </div>
</div>
    @html
    @common.pagination(result)
}
