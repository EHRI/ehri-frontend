@(title: Any, scripts: Html = Html(""), styles: Html = Html(""))(content: Html)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: GlobalConfig, lang: Lang)

<!DOCTYPE html>

<html lang="@lang.code">
    <head>
        <title>@title</title>

        <!--<link rel="stylesheet" media="screen" href="@controllers.core.routes.Assets.at("stylesheets/main.css")">-->
        <link rel="shortcut icon" type="image/png" href="@controllers.core.routes.Assets.at("images/favicon.png")">
        <link href="@controllers.core.routes.Assets.at("stylesheets/bootstrap/css/bootstrap.css")" rel="stylesheet">
        <link href="@controllers.core.routes.Assets.at("stylesheets/bootstrap/css/bootstrap-modal.css")" rel="stylesheet">
        <link href="@controllers.core.routes.Assets.at("chosen/chosen.css")" rel="stylesheet">
        <link href="@controllers.core.routes.Assets.at("chosen/chosen.css")" rel="stylesheet">
		<link href="@controllers.core.routes.Assets.at("stylesheets/bootstrap/css/datepicker.css")" rel="stylesheet">
        <link href="@controllers.core.routes.Assets.at("stylesheets/admin.css")" rel="stylesheet">
        @styles

        <!-- Temporary var for Angular file location -->
        <script>
            var ANGULAR_ROOT = "@controllers.core.routes.Assets.at("javascripts")";
        </script>
    </head>
    <body data-spy="scroll" data-target="#form-nav-sidebar">

        @activeIfCurrent(url: String, text: String) = {
            <li class="@{if(req.path.startsWith(url)) "active" else ""}"><a href="@url">@Html(text)</a></li>
        }

        <div id="wrap" class="page-container">
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <ul class="nav">
                        @* Bit hacky - add home link *@
                        <li class="@{if(req.path.equalsIgnoreCase(globalConfig.routeRegistry.default.url)) "active" else ""}">
                            <a href="@globalConfig.routeRegistry.default.url"><i class="icon-home icon-white"></i></a>
                        </li>
                        @globalConfig.menuConfig.mainSection.map { case (key, url) =>
                            @activeIfCurrent(url, Messages(key))
                        }
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                @Messages("pages.more")
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
                                @globalConfig.menuConfig.adminSection.map { case (key, url) =>
                                    @if(url == "-") {
                                        <li role="presentation" class="divider"></li>
                                    } else {
                                        @activeIfCurrent(url, Messages(key))
                                    }
                                }
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav pull-right">
                        @userOpt.flatMap(_.account).map { account =>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <span class="nav-collapse collapse responsive-collapse">
                                        @account.email
                                        @if(userOpt.map(_.isAdmin).getOrElse(false)) {
                                            [@Messages("group.admin")]
                                        }
                                    </span>
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
                                    @globalConfig.menuConfig.authSection.map { case (key, url) =>
                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="@url">@Messages(key)</a> </li>
                                    }
                                    <li role="presentation" class="divider"></li>
                                    <li>
                                        <a href="@globalConfig.routeRegistry.logout" id="signout">
                                            @Messages("banner.signout")
                                            <i class="icon icon-off"></i>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        }.getOrElse {
                            <li><a href="@globalConfig.routeRegistry.login" id="signin">@Messages("banner.signin")</a></li>
                        }
                    </ul>
                </div>
            </div>
            <div class="page-content">
                @content
                <div id="push"></div>
            </div>
        </div>
        @layout.footer()

        <script src="@controllers.core.routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script src="@controllers.core.routes.Assets.at("jquery-openid/jquery.openid.js")"></script>
        <script src="@controllers.core.routes.Assets.at("stylesheets/bootstrap/js/bootstrap.js")"></script>
        <script src="@controllers.core.routes.Assets.at("stylesheets/bootstrap/js/bootstrap-modal.js")"></script>
        <script src="@controllers.core.routes.Assets.at("stylesheets/bootstrap/js/bootstrap-modalmanager.js")"></script>
        <script src="@controllers.core.routes.Assets.at("chosen/chosen.jquery.min.js")"></script>
        <script type="text/javascript" src="@controllers.core.routes.Assets.at("javascripts/jquery.ba-hashchange.min.js")"></script>
        <script src="@controllers.core.routes.Assets.at("javascripts/docview.js")" type="text/javascript"></script>
        @scripts
    </body>
</html>
