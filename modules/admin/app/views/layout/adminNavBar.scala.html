@()(implicit userOpt: Option[UserProfile], request: RequestHeader, lang: Lang, globalConfig: global.GlobalConfig)

@activeIfCurrent(url: String, text: String) = {
    <li class="@{if(request.path.startsWith(url)) "active" else ""}"><a href="@url">@Html(text)</a></li>
}


<header role="navigation" class="navbar navbar-inverse navbar-fixed-top navbar-default">
    <section>
	    <aside class="navbar-header">
	      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-header">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
		    @* Bit hacky - add home link *@
	      <a class="navbar-brand" href="@controllers.admin.routes.Home.index">
              <i class="glyphicon glyphicon-home @{if(request.path.equalsIgnoreCase(controllers.admin.routes.Home.index.url)) "white" else ""}"></i>
          </a>
	    </aside>
	    <nav class="collapse navbar-collapse" id="navbar-header">
			<ul class="nav navbar-nav navbar-left" role="navigation">
			    @Seq(
                ("pages.search",                  controllers.admin.routes.AdminSearch.search().url),
                ("contentTypes.documentaryUnit",  controllers.units.routes.DocumentaryUnits.search().url),
                ("contentTypres.historicalAgent",  controllers.authorities.routes.HistoricalAgents.search().url),
                ("contentTypes.repository",       controllers.institutions.routes.Repositories.search().url),
                ("contentTypes.cvocConcept",      controllers.keywords.routes.Concepts.search().url)
                ).map { case (key, url) =>
			        @activeIfCurrent(url, Messages(key))
			    }
			    <li class="dropdown">
			        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			            @Messages("pages.more")
			            <b class="caret"></b>
			        </a>
			        <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
			            @Seq(
                        ("contentTypes.userProfile",      controllers.users.routes.UserProfiles.search().url),
                        ("contentTypes.group",            controllers.groups.routes.Groups.list().url),
                        ("contentTypes.country",          controllers.countries.routes.Countries.search().url),
                        ("contentTypes.cvocVocabulary",   controllers.vocabularies.routes.Vocabularies.list().url),
                        ("contentTypes.authoritativeSet", controllers.sets.routes.AuthoritativeSets.list().url),
                        ("s1", "-"),
                        ("contentTypes.systemEvent",      controllers.events.routes.SystemEvents.list().url),
                        ("s2", "-"),
                        ("search.updateIndex",            controllers.admin.routes.AdminSearch.updateIndex().url)
                        ).map { case (key, url) =>
			                @if(url == "-") {
			                    <li role="presentation" class="divider"></li>
			                } else {
			                    @activeIfCurrent(url, Messages(key))
			                }
			            }
			        </ul>
			    </li>
			</ul>
			<ul class="nav navbar-nav navbar-right" role="navigation">
			    @userOpt.flatMap(_.account).map { account =>
			    <li class="dropdown">
			        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			                                @account.email
			                                @if(userOpt.map(_.isAdmin).getOrElse(false)) {
			                                    [@Messages("group.admin")]
			                                }
			            <b class="caret"></b>
			        </a>
			        <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
			            @Seq(
                        ("portal.home", controllers.portal.routes.Portal.index().url),
                        ("portal.profile", controllers.portal.routes.Profile.profile().url)
                        ).map { case (key, url) =>
			                <li role="presentation"><a role="menuitem" tabindex="-1" href="@url">@Messages(key)</a> </li>
			            }
			            <li role="presentation" class="divider"></li>
			            <li>
			                <a href="@controllers.portal.routes.Profile.logout" id="signout">
			                    <span class="hidden-responsive">@Messages("banner.signout")</span>
			                    <i class="glyphicon glyphicon-off"></i>
			                </a>
			            </li>
			        </ul>
			    </li>
			    }.getOrElse {
			        <li><a href="controllers.portal.routes.Profile.login" id="signin">@Messages("banner.signin")</a></li>
			    }
			</ul>
		</nav>
    </section>
</header>
