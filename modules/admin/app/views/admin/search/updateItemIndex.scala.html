@(item: models.base.AnyModel, field: String, action: Call)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, flash: Flash, messages: Messages)

@import controllers.admin.IndexChildren._

@extraStyle = {
    <style>
        #update-progress {
            max-height: 200px;
            overflow: auto;
        }
        #update-progress pre {
            background-color: #fff;
            font-size: 0.7em;
        }
    </style>
}

@extraScript = {
    <script type="application/javascript">
        var SOCKET_URI = "@action.webSocketURL(globalConfig.https)";
        var DONE_MSG = "@controllers.admin.Indexing.DONE_MESSAGE";
        var ERR_MSG = "@controllers.admin.Indexing.ERR_MESSAGE";
        function getData() {
            return JSON.stringify({
                @ID: "@item.id",
                @TYPE: "@item.isA",
                @FIELD: "@field"
            });
        }
    </script>
    <script src="@controllers.portal.routes.PortalAssets.versioned("js/index_utils.js")" type="text/javascript"></script>
}

@implicitField = @{ views.html.helper.FieldConstructor(formHelpers.fieldTemplate.f) }

@views.html.admin.layout.rightSidebar(Messages("search.index.update.for", item.toStringLang), scripts=extraScript, styles = extraStyle, breadcrumbs = views.html.admin.common.breadcrumbs(List(item))) {
    <form id="update-form" method="post" class="form-horizontal">
        @formHelpers.csrfToken()

        <div class="form-actions">
            <input type="submit" id="submit-update" class="btn btn-danger" value="@Messages("search.index.update")" />
        </div>

        <div id="update-progress">
        </div>
    </form>
} {

}
