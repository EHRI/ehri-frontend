@(form: play.api.data.Form[LinkF])(
implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, messages: Messages, md: views.MarkdownRenderer, flash: Flash)

@implicitField = @{ views.html.helper.FieldConstructor(formHelpers.fieldTemplate.f) }

@import LinkF._

@formHelpers.csrfToken()
<fieldset id="annotate-area">
    <legend>@Messages("link.create")</legend>
    @defining("link") { implicit fieldPrefix =>
        @defining(form("")) { desc =>
            @formHelpers.textInput(desc, DESCRIPTION)
            @formHelpers.enumChoiceInput(form(LINK_TYPE), LinkType, LINK_TYPE, blank=true)
            @formHelpers.enumChoiceInput(form(LINK_FIELD), LinkField, LINK_FIELD, blank=true)

            <div class="inline-formset form-group clearfix" data-prefix="@DATES">
                <!-- Template for adding inline date forms via JS -->
                <label class="control-label">
                    @Messages(fieldPrefix + "." + DATES)
                    <a href="#" class="add-inline-element"><i class="glyphicon glyphicon-plus-sign"></i></a>
                </label>
                <div class="inline-element-template form-template">
                    @formHelpers.inlineDateSet(desc(DATES + "[IDX]"))
                </div>
                <div class="inline-element-list">
                    @helper.repeat(desc(DATES), min = 0) { desc =>
                        @formHelpers.inlineDateSet(desc)
                    }
                </div>
            </div>
        }
    }
</fieldset>
