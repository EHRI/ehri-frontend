@()(implicit userOpt: Option[UserProfile], request: RequestHeader, lang: Lang, globalConfig: global.GlobalConfig)

@activeIfCurrent(url: String, text: String) = {
    <li class="@{if(request.path.startsWith(url)) "active" else ""}"><a href="@url">@Html(text)</a></li>
}
@defining(utils.SessionPrefs()) { implicit prefs =>
    @p.layout.topNavBar {
        <ul class="nav navbar-nav navbar-left" role="navigation">
            @views.admin.Helpers.mainMenu.map { case (key, url) =>
                @activeIfCurrent(url, Messages(key))
            }
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    @Messages("pages.more")
                    <b class="caret"></b>
                </a>

                <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
                    @views.admin.Helpers.moreMenu.map { case (key, url) =>
                        @if(url == "-") {
                            <li role="presentation" class="divider"></li>
                        } else {
                            @activeIfCurrent(url, Messages(key))
                        }
                    }
                </ul>
            </li>
        </ul>
    } {
        @p.layout.accountHeaderRightMenu(showSearch = false, showFeedback = false, showAdminLink = false)
    }
}