@(item: DocumentaryUnit, scripts: Html = Html(""), styles: Html = Html(""), sidebar: Html = Html(""))(html: Html)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: GlobalConfig, lang: Lang, flash: Flash)

@rightSidebarLayout(item.model.identifier, breadcrumbs = documentaryUnit.breadcrumbs(item), scripts = scripts, styles = styles) {
    @html
} {

    @sidebar

    @common.visibility(item, controllers.archdesc.routes.DocumentaryUnits.visibility(item.id), ContentTypes.DocumentaryUnit)
    @common.latestAction(item, controllers.archdesc.routes.DocumentaryUnits.history(item.id))

    <ul class="item-actions nav nav-tabs nav-stacked">
        @userOpt.map { user =>
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Create)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.createDoc(item.id)">@Messages("actions.createChildDocUnit")</a></li>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Annotate)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.linkAnnotateSelect(item.id, EntityType.DocumentaryUnit.toString)">@Messages("actions.linkTo")</a></li>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Update)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.update(item.id)">@Messages("actions.updateItem")</a></li>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Update)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.visibility(item.id)">@Messages("actions.setVisibility")</a></li>
                }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Delete)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.delete(item.id)">@Messages("actions.deleteItem")</a></li>
                }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Grant)) {
                <li><a href="@controllers.archdesc.routes.DocumentaryUnits.managePermissions(item.id)">@Messages("actions.managePermissions")</a></li>
            }
        }
    </ul>

    <ul class="item-actions nav nav-tabs nav-stacked">
        <li><a href="@controllers.core.routes.ApiController.getItem(ContentTypes.DocumentaryUnit.toString, item.id)">@Messages("actions.exportJson")</a></li>
    </ul>
}