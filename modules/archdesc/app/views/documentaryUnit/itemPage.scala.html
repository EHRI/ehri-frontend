@(item: DocumentaryUnit, scripts: Html = Html(""), styles: Html = Html(""), sidebar: Html = Html(""))(html: Html)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, lang: Lang, flash: Flash)

@layout.rightSidebar(item.model.identifier, breadcrumbs = documentaryUnit.breadcrumbs(item), scripts = scripts, styles = styles) {
    @html
} {

    @sidebar

    @common.visibility(item, controllers.archdesc.routes.DocumentaryUnits.visibility(item.id), ContentTypes.DocumentaryUnit)
    @common.latestAction(item, controllers.archdesc.routes.DocumentaryUnits.history(item.id))

    <div class="list-group item-actions">
        @userOpt.map { user =>
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Create)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.createDoc(item.id)">@Messages("actions.createChildDocUnit")</a>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Annotate)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.linkAnnotateSelect(item.id, EntityType.DocumentaryUnit)">@Messages("actions.linkTo")</a>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Update)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.update(item.id)">@Messages("actions.updateItem")</a>
            }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Update)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.visibility(item.id)">@Messages("actions.setVisibility")</a>
                }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Delete)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.delete(item.id)">@Messages("actions.deleteItem")</a>
                }
            @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Grant)) {
                <a class="list-group-item" href="@controllers.archdesc.routes.DocumentaryUnits.managePermissions(item.id)">@Messages("actions.managePermissions")</a>
            }
        }
    </div>

    <div class="list-group item-actions">
        <a class="list-group-item" href="@controllers.core.routes.ApiController.getItem(ContentTypes.DocumentaryUnit.toString, item.id)">@Messages("actions.exportJson")</a>
    </div>
}