@(item: WithDescriptions[Description], desc: DocumentaryUnitDescriptionF, links: Seq[Link], annotations: Seq[Annotation], editable: Boolean = false)(implicit fieldPrefix: String, userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, lang: Lang)

@import defines._
@import models.IsadG._
@import views.html.common.descriptionSection

@actions(id: String, did: String) = {
    @userOpt.map { user =>
        @if(user.hasPermission(ContentTypes.DocumentaryUnit, PermissionType.Update)) {
            <div class="btn-group pull-right">
                <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#">
                    @Messages("item.actions")
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="@controllers.archdesc.routes.DocumentaryUnits.manageAccessPoints(id, did)">
                            @Messages("describedEntity.manageAccessPoints")
                        </a>
                    </li>
                    <li>
                        <a href="@controllers.archdesc.routes.DocumentaryUnits.updateDescription(id, did)">
                            @Messages("describedEntity.editDescription")
                        </a>
                    </li>
                    <li>
                        <a class="alert alert-danger" href="@controllers.archdesc.routes.DocumentaryUnits.deleteDescription(id, did)">
                            @Messages("describedEntity.deleteDescription")
                        </a>
                    </li>
                </ul>
            </div>
        }
    }
}

@common.descriptionOutline(item, desc, actions(item.id, desc.id.getOrElse("NO-ID"))) {
    <h2>@desc.name</h2>
    @common.listValue(desc.identity.parallelFormsOfName, PARALLEL_FORMS_OF_NAME)

    @descriptionSection(IDENTITY_AREA) {
        @common.stringValue(desc.identity.`abstract`, ABSTRACT)
        @common.renderDates(desc, DATES)
        @common.stringValue(desc.identity.levelOfDescription, LEVEL_OF_DESCRIPTION)
        @common.stringValue(desc.identity.extentAndMedium, EXTENT_MEDIUM)
    }

    @descriptionSection(CONTEXT_AREA) {
        @common.stringValue(desc.context.biographicalHistory, ADMIN_BIOG)
        @common.stringValue(desc.context.archivalHistory, ARCH_HIST)
        @common.stringValue(desc.context.acquisition, ACQUISITION)
    }

    @descriptionSection(CONTENT_AREA) {
        @common.stringValue(desc.content.scopeAndContent, SCOPE_CONTENT)
        @common.stringValue(desc.content.appraisal, APPRAISAL)
        @common.stringValue(desc.content.accruals, ACCRUALS)
        @common.stringValue(desc.content.systemOfArrangement, SYS_ARR)
    }

    @descriptionSection(CONDITIONS_AREA) {
        @common.stringValue(desc.conditions.conditionsOfAccess, ACCESS_COND)
        @common.stringValue(desc.conditions.conditionsOfReproduction, REPROD_COND)

        @common.listValue(desc.conditions.languageOfMaterials, LANG_MATERIALS, transformFunc = {s => views.Helpers.languageCodeToName(s)})
        @common.listValue(desc.conditions.scriptOfMaterials, SCRIPT_MATERIALS, transformFunc = {s => views.Helpers.scriptCodeToName(s)})
        @common.stringValue(desc.conditions.physicalCharacteristics, PHYSICAL_CHARS)
        @common.stringValue(desc.conditions.findingAids, FINDING_AIDS)
    }

    @descriptionSection(MATERIALS_AREA) {
        @common.stringValue(desc.materials.locationOfOriginals, LOCATION_ORIGINALS)
        @common.stringValue(desc.materials.locationOfCopies, LOCATION_COPIES)
        @common.stringValue(desc.materials.relatedUnitsOfDescription, RELATED_UNITS)
        @common.stringValue(desc.materials.publicationNote, PUBLICATION_NOTE)
    }

    @descriptionSection(NOTES_AREA) {
        @common.listValue(desc.notes, NOTES)
    }

    @descriptionSection(CONTROL_AREA) {
        @common.stringValue(desc.control.archivistNote, ARCHIVIST_NOTE)
        @common.stringValue(desc.control.rulesAndConventions, RULES_CONVENTIONS)
        @common.stringValue(desc.control.datesOfDescriptions, DATES_DESCRIPTIONS)
        @common.stringValue(desc.control.provenance, PROVENANCE)
    }

    @link.relatedLinks(item, desc, links)

    @desc.unknownProperties.map { e =>
        @common.unknownData(e)
    }
}
