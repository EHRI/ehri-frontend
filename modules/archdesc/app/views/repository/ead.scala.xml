@(repo: Repository, trees: Seq[utils.ead.DocTree])(implicit lang: Lang)

@level(cno: Int, tree: utils.ead.DocTree) = {
    <c@cno>
        <did>
            <unitid>@tree.item.id</unitid>
            <unittitle>@tree.item.toStringLang</unittitle>
        </did>
        @tree.item.model.primaryDescription.map { desc =>
            @desc.context.biographicalHistory.map { sc =>
                <biogHist>
                <p>
                    @sc
                </p>
                </biogHist>}
            @desc.content.scopeAndContent.map { sc =>
                <scopeContent>
                    <p>
                        @sc
                    </p>
                </scopeContent>}}
        @for(t <- tree.children) {
            @level(cno + 1, t)}
    </c@cno>
}

<ead>
    <repository>
        @repo.toStringLang
    </repository>
    <archdesc>
        @trees.map(t => level(1, t))
    </archdesc>
</ead>