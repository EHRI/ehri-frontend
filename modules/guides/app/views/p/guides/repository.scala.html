@(guide: Guide, page: GuidePage, pages: List[GuidePage], item: Repository)(implicit userOpt: Option[UserProfile], request: RequestHeader, prefs: utils.SessionPrefs, globalConfig: global.GlobalConfig, lang: Lang, flash: Flash)

@optionalContent(page: GuidePage) = {
    @item.model.logoUrl.map { logo =>
        @defining(item.url.getOrElse(controllers.portal.guides.routes.Repositories.browse(guide.path, page.path).absoluteURL(request.secure))) { url =>
            <a href="@url">
                <img class="repository-logo" src="@logo" alt="@item.toStringLang" />
            </a>
        }
    }

    @* FIXME: This will list addresses for multiple descriptions
    regardless of which one is being displayed *@
    @views.html.common.panel(Messages("repository.contact")) {
        @item.model.descriptions.map { desc =>
            @views.html.p.repository.address(item, desc)
        }
    }

    @page.description.map(d => Html(views.Helpers.renderTrustedMarkdown(d)))
}
@views.html.layout.guideLayout(guide, page, pages, optionalContent = Some(optionalContent(page))) {
    @defining(EntityType.Repository.toString) { implicit prefix =>
        @item.model.descriptions.map { desc =>
            @views.html.p.repository.description(item, desc, Seq.empty, Seq.empty)
        }
    }
    <footer></footer>
}