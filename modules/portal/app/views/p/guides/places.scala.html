@(template: (GuidesPage, (GuidesData, List[GuidesPage])), page: utils.search.ItemPage[(Concept,utils.search.SearchHit)], params: utils.search.SearchParams)(implicit userOpt: Option[UserProfile], request: RequestHeader, prefs: utils.SessionPrefs, globalConfig: global.GlobalConfig, lang: Lang, flash: Flash)

@js = {
	<script type="text/javascript" src="@controllers.core.routes.Assets.at("js/leaflet.js")"></script>
	<script type="text/javascript">
		var map = L.map('map').setView([50.508174054149, 14.152353697237], 13);
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);

		@page.items.map { case(item, hit) =>
			@item.model.descriptions.headOption.map { desc =>
				@if(desc.longitude.nonEmpty) {
					L.marker([@desc.latitude, @desc.longitude])
						.addTo(map)
			    		.bindPopup("@item.toStringLang")
		    	}
	    	}
    	}
	</script>
}
@css = {
    <link rel="stylesheet" media="screen" href="@controllers.portal.routes.Assets.at("css/leaflet.css")">
}
@p.layout.guideLayout(template, js, css) {
	<article>
		<header>
			<form role="form" action="@controllers.portal.routes.Guides.layoutRetrieval(template._2._1.path, template._1.path)">
				<ul class="nav nav-pills nav-ehri nav-ehri-black nav-justified">
					<li><input class="nav-ehri nav-ehri-black nav-ehri-input" name="q" placeholder="Quick Search" /></li>
					<li><button type="submit" class="nav-ehri nav-ehri-black nav-ehri-input">Search</button></li>
				</ul>
			</form>
		</header>
		<section>
			<div id="map" style="height:400px;"></div>
		</section>
		<footer>
		</footer>
	</article>

}
