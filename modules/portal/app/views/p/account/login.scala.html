@(openIdForm: Form[String], pwForm: Form[(String,String)], oauthProviders: Map[String,Call] = Map.empty)(implicit userOpt: Option[Account], request: RequestHeader, globalConfig: global.GlobalConfig, flash: Flash, lang: Lang, token: play.filters.csrf.CSRF.Token)

@implicitField = @{ views.html.helper.FieldConstructor(p.helpers.fieldTemplate.f) }

@openIdJquery = {
    <script src="@controllers.core.routes.Assets.at("js/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@controllers.core.routes.Assets.at("jquery-openid/jquery.openid.js")"></script>
    <script type="application/javascript">
        jQuery(function($) {
        // Openid
            $("form.openid").openid();
        });
    </script>
}

@openIdStyles = {
    <link href="@controllers.core.routes.Assets.at("jquery-openid/openid.css")" rel="stylesheet">
    <link href="@controllers.core.routes.Assets.at("css/zocial.css")" rel="stylesheet">
}

@p.layout.portalLayoutSimple(Messages("login.login"), scripts=openIdJquery, styles=openIdStyles) {

    <div class="container main-content">
        <h3>@Messages("portal.login")</h3>
        <hr />
        <p>
            @Messages("portal.loginByProvider")
        </p>
        @if(!oauthProviders.isEmpty) {
            @oauthProviders.map { case (name, call) =>
                <a class="zocial @name" href="@call">@name</a>
            }
        }

        <p></p>

        @helper.form(action = controllers.portal.routes.Portal.openIDLoginPost, 'class -> "openid login-form form-inline") {
            @formHelpers.csrfToken()
            <div>
                <ul class="providers">
                    <li class="openid" title="OpenID">
                        <img src="@controllers.core.routes.Assets.at("jquery-openid/images/openidW.png")" alt="icon" />
                        <span><strong>http://{your-openid-url}</strong></span>
                    </li>
                    <li class="direct" title="Yahoo">
                        <img src="@controllers.core.routes.Assets.at("jquery-openid/images/yahooW.png")" alt="icon" />
                        <span>http://me.yahoo.com/</span>
                    </li>
                    <li class="username" title="Flickr user name">
                        <img src="@controllers.core.routes.Assets.at("jquery-openid/images/flickr.png")" alt="icon" />
                        <span>http://flickr.com/<strong>username</strong>/</span>
                    </li>
                    <li class="username" title="Wordpress blog name">
                        <img src="@controllers.core.routes.Assets.at("jquery-openid/images/wordpress.png")" alt="icon" />
                        <span>http://<strong>username</strong>.wordpress.com</span>
                    </li>
                    <li class="username" title="Blogger blog name">
                        <img src="@controllers.core.routes.Assets.at("jquery-openid/images/blogger.png")" alt="icon" />
                        <span>http://<strong>username</strong>.blogspot.com/</span>
                    </li>
                </ul>
            </div>
            <fieldset>
                <label for="openid_username">Or manually enter your <span>Provider user name</span> URL:</label>
                <div>
                    <span></span>
                        <input type="text" name="openid_username" id="openid_username" />
                    <span></span>
                    <input type="submit" value="Login" />
                </div>
            </fieldset>
            <fieldset>
                <label for="openid_identifier">Enter your <a class="openid_logo" href="http://openid.net">OpenID</a></label>
            </fieldset>
            @formHelpers.globalErrors(openIdForm)
            <div class="form-group">
                <label class="sr-only" for="openid_identifier">@Messages("login.openId")</label>
                <input class="form-control" type="text" name="openid_identifier" id="openid_identifier" placeholder="@Messages("portal.openIdEnterUrl")" />
            </div>
            <input type="submit" class="btn btn-default openid" value="@Messages("submitButton.loginWithOpenid")" />
        }

        <hr />
        <p>@Messages("portal.loginByPassword")</p>

        @formHelpers.globalErrors(pwForm)

        @helper.form(action = controllers.portal.routes.Portal.passwordLoginPost, 'class -> "login-form form-inline") {
            @formHelpers.csrfToken()

            <div class="form-group">
                <label class="sr-only" for="pw-email">@Messages("login.email")</label>
                <input type="text" class="form-control" name="email" id="pw-email" placeholder="@Messages("login.email")" />
            </div>
            <div class="form-group">
                <label class="sr-only" for="pw-pw">@Messages("login.password")</label>
                <input type="password" class="form-control" name="password" id="pw-pw" placeholder="@Messages("login.password")" />
            </div>
            <input type="submit" class="btn btn-default" value="@Messages("submitButton.loginWithPassword")" />
            <em style="margin-left: 5px; margin-right:  5px"><strong>or</strong></em>
            <a class="btn btn-primary" href="@controllers.portal.routes.Portal.signup">@Messages("portal.signup")</a>

        }

        <hr />

        <p>
            @Messages("portal.recoverAccount")
        </p>
        <a href="@controllers.portal.routes.Portal.forgotPassword">@Messages("portal.forgotPasswordLink")</a>

    </div>

}(None, request, globalConfig, flash, lang)

