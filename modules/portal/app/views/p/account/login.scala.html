@(pwForm: Form[(String,String)], registerForm: Form[SignupData], registerAction: Call, recaptchaKey: String, openIdForm: Form[String], oauthProviders: Map[String,Call] = Map.empty, isLogin: Boolean = true)(implicit userOpt: Option[Account], request: RequestHeader, globalConfig: global.GlobalConfig, flash: Flash, lang: Lang, token: play.filters.csrf.CSRF.Token)

@implicitField = @{ views.html.helper.FieldConstructor(p.helpers.fieldTemplateSignUp.f) }

@extraScripts = {
    <script type="application/javascript">
        jQuery(function($) {
            // Openid
            $(".show-more").on("click", function(e) {
                e.preventDefault();
                $(".more-login-options").slideToggle();
            })
        });
    </script>
}

@p.layout.portalLayoutSimple(Messages("login"), scripts = extraScripts) {
    @views.html.layout.mainContent {
        <div class="login-page">
            <div class="login-or-signup" role="tabpanel">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="@{if(isLogin) "active"}"><a href="#login" aria-controls="login" role="tab" data-toggle="tab">@Messages("login")</a> </li>
                    <li role="presentation" class="@{if(!isLogin) "active"}"><a href="#signup" aria-controls="signup" role="tab" data-toggle="tab">@Messages("login.signup")</a> </li>
                </ul>

                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane @{if(isLogin) "active"}" id="login">
                        @oauth2Form("login.loginWith", openIdForm, oauthProviders, isLogin)
                        @loginForm(pwForm)
                    </div>
                    <div role="tabpanel" class="tab-pane @{if(!isLogin) "active"}" id="signup">
                        @oauth2Form("login.signupWith", openIdForm, oauthProviders, isLogin)
                        @signupForm(registerForm, registerAction, recaptchaKey)
                    </div>
                </div>
            </div>
        </div>

    }
}(None, request, globalConfig, flash, lang)

