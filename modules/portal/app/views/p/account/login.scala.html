@(openIdForm: Form[String], pwForm: Form[(String,String)], oauthProviders: Map[String,Call] = Map.empty)(implicit userOpt: Option[Account], request: RequestHeader, globalConfig: global.GlobalConfig, flash: Flash, lang: Lang, token: play.filters.csrf.CSRF.Token)

@implicitField = @{ views.html.helper.FieldConstructor(p.helpers.fieldTemplate.f) }

@openIdJquery = {
    <script src="@controllers.core.routes.Assets.at("js/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@controllers.core.routes.Assets.at("jquery-openid/jquery.openid.js")"></script>
    <script type="application/javascript">
        jQuery(function($) {
        // Openid
            $("form.openid").openid();
        });
    </script>
}

@openIdStyles = {
}

@p.layout.portalLayoutSimple(Messages("login.login"), scripts=openIdJquery, styles=openIdStyles) {

    @p.layout.mainContent {
        <h3>@Messages("portal.login")</h3>
        <hr />

<section class="login">
    <div class="wrap">
        @helper.form(action = controllers.portal.routes.Portal.openIDLoginPost, 'class -> "openid form") {
            <p>
                @Messages("portal.loginByProvider")
            </p>
            @formHelpers.csrfToken()
            <div class="form-block">
                <ul class="providers nav nav-tabs nav-justified nav-tabs-xs text-center">
                    @if(!oauthProviders.isEmpty) {
                        @oauthProviders.map { case (name, call) =>
                            <li class="notOpenId">
                                <a href="@call" title="@name"><i  class="icon-social @name"></i></a>
                            </li>
                        }
                    }

                    <li class="openid active" title="OpenID">
                        <a><i class="icon-social openid"></i></a>
                        <span><strong>http://{your-openid-url}</strong></span>
                    </li>
                    <li class="direct" title="Yahoo">
                        <a><i class="icon-social yahoo"></i></a>
                        <span>http://me.yahoo.com/</span>
                    </li>
                    <li class="username" title="Flickr user name">
                        <a><i class="icon-social flickr"></i></a>
                        <span>http://flickr.com/<strong>username</strong>/</span>
                    </li>
                    <li class="username" title="Wordpress blog name">
                        <a><i class="icon-social wordpress"></i></a>
                        <span>http://<strong>username</strong>.wordpress.com</span>
                    </li>
                    <li class="username" title="Blogger blog name">
                        <a><i class="icon-social blogger"></i></a>
                        <span>http://<strong>username</strong>.blogspot.com/</span>
                    </li>
                </ul>

                <fieldset style="display:none;">
                    <label for="openid_username">Or manually enter your <span>Provider user name</span> URL:</label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-addon"></span>
                        <input type="text" class="form-control" name="openid_username" />
                        <span class="input-group-addon"></span>
                    </div>
                </fieldset>
                <div class="clearfix"></div>
                            
                <fieldset class="identifier openid">
                 <input class="form-control" type="text" name="openid_identifier" id="openid_identifier" placeholder="@Messages("portal.openIdEnterUrl")" />
                </fieldset>
            </div>
            @formHelpers.globalErrors(openIdForm)

            <input type="submit" class="login-button openid" value="@Messages("submitButton.loginWithOpenid")" />
        }
        @helper.form(action = controllers.portal.routes.Portal.passwordLoginPost, 'class -> "login-form form") {
            <p>@Messages("portal.loginByPassword")</p>

            @formHelpers.globalErrors(pwForm)

            @formHelpers.csrfToken()

            <div class="form-block">
                <input type="email" class="form-control" name="email" id="pw-email" placeholder="@Messages("login.email")" />
                <input type="password" class="form-control" name="password" id="pw-pw" placeholder="@Messages("login.password")" />
            </div>

            <input type="submit" class="login-button" value="@Messages("submitButton.loginWithPassword")" />
            <p class="text-center">
                <em><strong>or</strong></em>
            </p>
            <p class="text-center">
                <a class="btn btn-primary" href="@controllers.portal.routes.Portal.signup">@Messages("portal.signup")</a>
            </p>

        }
    </div>
</section>

        <hr />

        <p>
            @Messages("portal.recoverAccount")
        </p>
        <a href="@controllers.portal.routes.Portal.forgotPassword">@Messages("portal.forgotPasswordLink")</a>
    }

}(None, request, globalConfig, flash, lang)

