@(item: AnyModel, desc: Description, annotations: Seq[Annotation])(implicit userOpt: Option[UserProfile], req: RequestHeader, prefs: utils.SessionPrefs, lang: Lang, globalConfig: global.GlobalConfig)

<div class="description-annotations annotation-set clearfix">
    <h3 class="block-header small">
        @Messages("annotation")
    </h3>
    @defining(Annotation.itemAnnotations(desc.id, annotations).filter(_.model.field.isEmpty)) { annotations =>
        @p.annotation.annotationBlockList(annotations)
    }
    @userOpt.map { user =>
        @item.contentType.map { ct =>
            @if(user.hasPermission(ct, PermissionType.Annotate)) {
                <div class="annotate-item-controls">
                    @desc.id.map { did =>
                        <a data-item="@item.id" data-did="@did" class="annotate-item"
                            title="@Messages("annotation.create.title")"
                           href="@controllers.portal.annotate.routes.Annotations.annotate(item.id, did)">
                            <span class="fa fa-comment-o"></span>
                            @Messages("annotation.create")
                        </a>
                    }
                </div>
            }
        }
    }
</div>