@(item: AnyModel, path: Seq[AnyModel], hit: utils.search.SearchHit, watched: Boolean, showRepository: Boolean = true)(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: global.GlobalConfig, lang: Lang, descriptionId: Option[String] = None, context: Option[Holder[_]] = None)

@wrapParent(doc: AnyModel, path: Seq[AnyModel]) = {
    @if(path.lastOption.map(_.id) != context.map(_.id)) {
        @path.lastOption.map { p =>
            @wrapParent(doc, path.dropRight(1))
            <li>
                <a class="search-item-parent-name type-highlight @p.isA" href="@controllers.portal.routes.Portal.browseVirtual(p.id, views.p.Helpers.pathToParam(path))">@p.toStringLang</a>
            </li>
        }
    }
}

@p.common.searchHits(hit) {
    <div class="search-item" id="@item.id">
            <div class="search-item-actions">
                @p.common.watchButtonsSmall(item, watched)
            </div>
            <h3 class="search-item-heading type-highlight @item.isA.toString">
                <a class="@item.isA" href="@controllers.portal.routes.Portal.browseVirtual(item.id, views.p.Helpers.pathToParam(path))">@item.toStringLang</a>
            </h3>
            <div class="search-item-body">
                <ol class="collapsible">@wrapParent(item, path)</ol>
                @item match {
                    case d: DocumentaryUnit => {
                        @p.documentaryUnit.listItemBody(d, showRepository)
                    }
                    case v: VirtualUnit => {
                        @listItemBody(v, path)
                    }
                    case _ => {
                    }
                }
            </div>
    </div>
}
