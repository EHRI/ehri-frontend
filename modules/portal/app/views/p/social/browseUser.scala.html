@(them: UserProfile, events: List[SystemEvent], watchList: utils.AbstractPage[AnyModel], followed: Boolean, canMessage: Boolean)(implicit userOpt: Option[UserProfile], request: RequestHeader, prefs: utils.SessionPrefs, globalConfig: global.GlobalConfig, lang: Lang, flash: Flash)

@p.layout.portalLayout(them.toStringLang, "user") {
    @profileBar(them){
        @for(user <- userOpt if user.id != them.id) {
        <div class="btn-group">
            @p.common.messageButtons(them, canMessage)
            @p.common.followingButtons(them, followed)
        </div>
        }
    }

    @layout.mainContent {
        @profileForUser(them)

        <div class="user-profile-content">
            @defining(request.getQueryString("tab").getOrElse("0")) { activeTab =>
                <div class="tab-header">
                    <h3 class="block-header user @(if(activeTab == "0") "active")">
                        <a href="#user-watch-list" data-tabidx="0" title="@Messages("portal.profile.watch.list")" data-toggle="tab">
                            @Messages("portal.profile.watch.list")
                        </a>
                    </h3>
                    <h3 class="block-header user @(if(activeTab == "1") "active")">
                        <a href="#user-activity" data-tabidx="1" title="@Messages("portal.activity")" data-toggle="tab">
                            @Messages("portal.activity")
                        </a>
                    </h3>
                </div>
                <div class="tab-content">
                    <div class="tab-pane @(if(activeTab == "0") "active")" id="user-watch-list">
                        @p.profile.itemWatchList(them, watchList)
                    </div>
                    <div class="tab-pane @(if(activeTab == "1") "active")" id="user-activity">
                        @if(!events.isEmpty) {
                        <div class="timeline-container">
                            <ul id="activity-stream" class="timeline">
                                @p.activity.eventItems(events)
                            </ul>
                        </div>
                        } else {
                            <p class="text-muted">@Messages("portal.activity.noUserActivityYet")</p>
                        }
                    </div>
                </div>
            }
        </div>

    }
}