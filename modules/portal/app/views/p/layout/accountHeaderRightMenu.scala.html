@(showSearch: Boolean = true, showFeedback: Boolean = true, showAdminLink: Boolean = false)(implicit userOpt: Option[UserProfile], request: RequestHeader, prefs: utils.SessionPrefs, lang: Lang)

<ul class="account-admin nav navbar-nav navbar-right">
    @if(showSearch) {
        <li>
            @helper.form(action = controllers.portal.routes.Portal.search, 'class -> "global-search inactive", 'role -> "search") {
                <input type="text" name="q" id="quicksearch" />
                <span class="glyphicon glyphicon-search search-icon"></span>
            }
        </li>
    }
    @if(showFeedback) {
        <li class="slide-out-div">
            <a class="handle" role="button" aria-expanded="false" href="@controllers.portal.routes.Feedback.feedback">@Messages("portal.feedback")</a>
            <div id="suggestions">
                <div id="suggestion-thanks" class="alert alert-success">
                    <h4>@Messages("portal.feedback.thanks")</h4>
                    @Messages("portal.feedback.thanks.message")
                </div>

                @feedbackForm(models.Feedback.form)
            </div>
        </li>
    }
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
            @Messages("portal.help")
            <span class="caret"></span>
        </a>
        <ul id="help-dropdown" class="dropdown-menu" role="menu">
            <li>
                <a target="_blank" href="https://docs.google.com/document/d/15lpPB2uwVcveWyIqkn8Jzse2iOFI3cOx5OqudduRAWw/edit?usp=sharing">
                    @Messages("portal.help.general")
                </a>
            </li>
            <li>
                <a target="_blank" href="https://docs.google.com/document/d/13HE65QB_gjUp3Hcu1N7nnEsUNfj9qrDbC_ZkBoSmsPE/edit?usp=sharing">
                    @Messages("portal.help.archivists")
                </a>
            </li>
            <li class="divider"></li>
            <li><a href="@controllers.portal.routes.Helpdesk.helpdesk">@Messages("portal.help.helpdesk")</a></li>
        </ul>
    </li>
    @userOpt.map { user =>
        @if(showAdminLink && user.account.exists(_.staff)) {
        <li>
            <a href="/admin">@Messages("pages.admin")</a>
        </li>
        }

        <li class="view-options">
            <a href="#" class="@views.Helpers.maybeActive(controllers.portal.profile.routes.Profile.profile.url) gravitar dropdown-toggle" data-toggle="dropdown">
                <img height="20" width="20" class="user-img-icon"
                     src="@views.p.Helpers.gravitar(user.model.imageUrl)"/>
                @user.model.name
                <span class="caret"></span>
            </a>
            <ul class="boolean-preferences dropdown-menu pull-right" role="menu">
                <li class="">
                    <a href="@controllers.portal.profile.routes.Profile.profile" class="gravitar">
                        <span class="glyphicon glyphicon-user"></span>
                        @Messages("portal.profile.menu.link")
                    </a>
                </li>
                <li role="presentation" class="dropdown-header">@Messages("portal.profile.preferences.view")</li>
                <li>
                    <a href="#" class="toggle-boolean-preference boolean-@prefs.showUserContent"
                       data-preference-name="showUserContent"
                       data-preference-value="@prefs.showUserContent">
                        @Messages("portal.profile.preferences.view.showUserContent")
                    </a>
                </li>

                <li role="presentation" class="dropdown-header">@Messages("portal.account")</li>
                <li>
                    <a href="@controllers.portal.account.routes.Accounts.logout">
                        @Messages("portal.logout")

                    </a>
                </li>
            </ul>
        </li>
    }.getOrElse {
    <li>
        <a href="@controllers.portal.account.routes.Accounts.login">
            @Messages("portal.login.signup")
        </a>
    </li>
    }
</ul>
