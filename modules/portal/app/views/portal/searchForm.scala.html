@(result: utils.search.ItemPage[(AnyModel,String)], params: utils.search.SearchParams, action: Call, autofocus: Boolean = true)(html: Html)(facets: Html = Html(""))(implicit userOpt: Option[UserProfile], req: RequestHeader, globalConfig: GlobalConfig, lang: Lang, flash: Flash)

@import utils.search.{SearchParams,SearchOrder}

@helper.form(action = action, 'role -> "form") {

    <div class="row top-row">
        <div class="col-md-3"><h3>Search</h3></div>
        <div class="col-md-9">
            <div class="form-group form-inline">
                <input type="search"
                       placeholder="@Messages("search.queryPlaceholder")"
                class="input-block-level span15" name="@SearchParams.QUERY" value="@params.query" @{if(autofocus) "autofocus"} />
                <button class="btn">
                    <i class="icon-search"></i>
                    @Messages("forms.search")
                </button>
            </div>

            @*
            <div class="form-group">
                <div class="btn-group pull-right" style="margin-top: 10px">
                    @SearchOrder.values.map { sortKey =>
                    @if(params.sort.equals(Some(sortKey))) {
                    <a class="btn btn-mini current-search-sort" href="@utils.joinPath(req.path, req.queryString.filterKeys(_ != SearchParams.SORT))">
                        @Messages("search." + sortKey)
                    </a>
                    } else {
                    <a class="btn btn-mini" href="@utils.joinPath(req.path, req.queryString.updated(SearchParams.SORT, Seq(sortKey.toString)))">
                        @Messages("search." + sortKey)
                    </a>
                    }
                    }
                </div>
            </div>
            *@

        </div>
    </div>
    <div class="row container">
        <div class="col-md-3 sidebar">
            @facets
        </div>
        <div class="col-md-9 container main-content">
            <h4>
                @Messages("pagination.displayingItems", result.offset + 1, result.offset + result.items.size, result.total)

                @result.spellcheck.map { case (actual, corrected) =>
                @defining(params.query.map(_.toLowerCase.replace(actual.toLowerCase, corrected))) { suggestion =>
                (@Messages("search.spellingSuggestion")
                <i>
                    <strong>
                        <a href="@utils.joinPath(req.path, req.queryString.updated(SearchParams.QUERY, suggestion.toSeq))">@suggestion</a>
                    </strong>
                </i>?)
                }
                }
            </h4>
            <p>
                @selectedFacets(result)
            </p>

            @html
            @pagination(result)
        </div>
    </div>
}
