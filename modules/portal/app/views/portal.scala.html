@(stats: utils.Stats)(implicit userOpt: Option[UserProfile], request: RequestHeader, prefs: utils.SessionPrefs, globalConfig: global.GlobalConfig, messages: Messages, md: views.MarkdownRenderer, flash: Flash)

@countLink(url: String, key: String, params: Any*) = {
<a href="@url">@Messages(key, params: _*)</a>
}

<!DOCTYPE html>

<html lang="@messages.lang.code">
    @views.html.layout.head(Messages("welcome.title"))
    <body>
        @views.html.layout.preambleScripts()
        <div id="wrap">
            @views.html.layout.readOnly()
            @views.html.layout.message()
            @views.html.layout.ipFilter()
            <header id="header" class="navigation">
                @views.html.layout.accountHeader(showSearch = false, showAdminLink = true)
            </header>
            <div class="page-content">
                <div class="jumbotron-container">
                    <div class="jumbotron">
                        <div class="container">
                            <h1>@Messages("welcome")</h1>
                            @helper.form(action = controllers.portal.routes.Portal.search()) {
                                @views.html.common.search.searchBar(utils.search.SearchParams.empty, placeholder = Messages("search.global"))
                            }
                        </div>
                    </div>
                </div>

                @views.html.layout.mainContent {
                    @views.html.common.flash(flash)
                    <div class="row">
                        <div class="welcome-lead">
                            @Markdown(Messages("welcome.blurb"))
                        </div>
                    </div>
                    <div class="row">
                        <div class="welcome-section Country">
                            <h2><a href="@controllers.portal.routes.Countries.searchAll()">@Messages("type.Country")</a>
                            </h2>
                            <p>@Messages("type.Country.description")</p>
                        </div>
                        <div class="welcome-section Repository">
                            <h2><a href="@controllers.portal.routes.Repositories.searchAll()">@Messages("type.Repository")</a>
                            </h2>
                            <p>@Messages("type.Repository.description")</p>
                        </div>
                        <div class="welcome-section DocumentaryUnit">
                            <h2><a href="@controllers.portal.routes.DocumentaryUnits.searchAll()">@Messages("type.DocumentaryUnit")</a>
                            </h2>
                            <p>@Messages("type.DocumentaryUnit.description")</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="welcome-section Country">
                        @(Html(Messages(
                            "landingBlurb.Country",
                            countLink(controllers.portal.routes.Countries.searchAll().url,
                                "landingBlurb.Country.link", stats.countryCount).body.trim
                        )))
                        </div>
                        <div class="welcome-section Repository">
                        @(Html(Messages(
                            "landingBlurb.Repository",
                            countLink(controllers.portal.routes.Repositories.searchAll().url,
                                "landingBlurb.Repository.link", stats.repositoryCount).body.trim,
                            countLink(controllers.portal.routes.Countries.searchAll().url + "?data=yes",
                                "landingBlurb.Repository.Country.link", stats.inCountryCount).body.trim
                        )))
                        </div>
                        <div class="welcome-section DocumentaryUnit">
                        @(Html(Messages(
                            "landingBlurb.DocumentaryUnit",
                            countLink(controllers.portal.routes.DocumentaryUnits.searchAll().url,
                                "landingBlurb.DocumentaryUnit.link", stats.documentaryUnitCount).body.trim,
                            countLink(controllers.portal.routes.Repositories.searchAll().url + "?data=yes",
                                "landingBlurb.DocumentaryUnit.Repository.link", stats.inRepositoryCount).body.trim
                        )))
                        </div>
                    </div>
                    <div class="row">
                        <div class="news-feed-container">
                            <hr>
                            <h3>@Messages("newsFeed")</h3>
                            <ul id="news-feed" class="list-unstyled panel-body front-page-panel-content">

                            </ul>
                        </div>
                    </div>
                </div>
                <div id="push"></div>
            }
        </div>
        @views.html.layout.footer()
        @views.html.dataPolicyModal()
        @views.html.layout.postambleScripts()

        <script>
            jQuery(document).ready(function ($) {
                $("#news-feed")
                        .load("@controllers.portal.routes.Portal.newsFeed().absoluteURL(secure = globalConfig.https)")
            });
        </script>
    </body>
</html>
