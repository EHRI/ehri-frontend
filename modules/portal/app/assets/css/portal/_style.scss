@import "mixins";

// Certain headings are uppercased
h2, h4 {
  text-transform: uppercase;
}

// TODO: Add a default button style
.btn {
}

.block-header {
  background-color: $secondary;
  color: $white;
  padding: $margin-xs;
  margin-bottom: $margin-sm;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
}

// Top navbar
#navbar-top-container {
  font-size: $font-size-xs;
  @extend .bg-dark;
}

// Both navbars are dark expanding  containers
#navbar-top, #navbar-primary {
  @extend .container,   .navbar, .navbar-dark;
}

#navbar-top {
  padding-top: 0;
  padding-bottom: 0;
  @extend .navbar-expand-lg;
}

#navbar-primary {
  @extend .navbar-expand-lg;
}

// Primary navbar
#navbar-primary-container {
  font-size: $font-size-sm;
  background-size: cover;
  background-position: center right;
  background-repeat: no-repeat;
  @extend .bg-secondary;
}

#navbar-primary-container-overlay {
  position: relative;
  height: 100%;
  background-color: rgba(54, 15, 79, 0.68);
}

#navbar-primary > #navbar-primary-dropdown > ul,
#navbar-top > #navbar-actions > ul,
#navbar-top > #navbar-account > ul {
  @extend .navbar-nav;
}

// Actions menu is always flat...
#navbar-actions > ul {
  flex-direction: row !important;
  @extend .mr-auto;

  > li {
    margin-right: $margin-sm;
  }

  @include media-breakpoint-up(lg) {
    > li:first-child a {
      // neg margin to correct inset
      margin-left: -1rem;
    }
  }
}

#navbar-account > ul {
  @extend .ml-auto;
  > li:last-child a {
    margin-right: -1rem;
  }
}

#navbar-actions,
#navbar-account {
  > ul > li > a:hover {
    text-decoration: none;
    background-color: $gray-900;
  }
}

body.home #navbar-primary-container {
  background-color: transparent !important;
}

#navbar-primary ul > li > a,
#navbar-primary .navbar-brand {
  @extend %heading-text;
}

#navbar-primary ul > li > a,
#navbar-primary .navbar-brand,
#navbar-actions > ul > li > a,
#navbar-account > ul > li > a {
  @extend %nav-link;
  color: $white;
}

#header-logo {
  width: 6.625rem;
}

// At narrow display, add borders and extra vertical padding
// to navbar items
#navbar-nav-dropdown > li {
  padding-top: .5rem;
  padding-bottom: .5rem;
}

#navbar-nav-dropdown #navbar-nav-search {
  padding: 1.5rem 0;

  #site-search-controls {
    width: 100%;
  }
}

#navbar-primary-dropdown #site-search-controls {
  margin: 1.5rem 0 1rem 0;

  @include search-box();

  // Hack for Twitter typeahead size
  .twitter-typeahead {
    display: block;
    float: left;
    width: 100% !important;
  }

  .tt-menu {
    background-color: $white;
    box-shadow: 2px 2px 5px 0 rgba(153,153,153,1);

    .tt-suggestion {
      padding: $margin-xs;
    }

    .tt-cursor {
      background-color: $gray-200;
    }
  }
}

#navbar-primary-dropdown {
  margin-top: $margin-sm;
}

#navbar-primary-dropdown > ul > li {
  border-top: 1px solid rgba(224, 224, 224, 0.3);
}

#navbar-primary-dropdown > ul > li:last-child > a {
  display: flex;
  align-items: center;
}

// At wide display, pad navbar items
@include media-breakpoint-up(lg) {

  #navbar-actions > ul,
  #navbar-account > ul {
    align-items: center;
  }

  #navbar-primary {
    padding-top: 0;
    padding-bottom: 0;
  }

  #navbar-primary-container {
    padding: 0;
  }

  #navbar-primary-dropdown {
    margin-top: 0;
    .nav-item {
      margin-right: $margin-lg;
    }
  }

  #navbar-logo {
    padding-right: 1.5rem;
  }

  #navbar-primary-dropdown > ul > li {
    border-top: 0;
  }

  #navbar-primary-dropdown > ul > li {
    padding: 0;
  }

  #navbar-primary-dropdown > ul > li > a {
    padding: 1.5rem 0;
    border-bottom: 0.5rem solid transparent;
    border-top: 0.5rem solid transparent;
  }

  #navbar-primary-dropdown > ul > li.active > a {
    border-bottom: .5rem solid $white;
  }

  #navbar-primary-dropdown > ul {
    justify-content: space-between;
    flex-grow: 1;
    > li:last-child {
      display: flex;
      align-items: center;
      padding-right: 0;
    }
  }

  #navbar-primary-dropdown #site-search-controls {
    margin: 0;
  }
}

// Quicksearch controls
#quicksearch-controls {
  color: $white;
  @extend .input-group;
  input[type='text'] {
    @extend .form-control;
  }
  button {
    //@extend .input-group-addon;
  }
}

// Footer
#portal-footer {
  background-color: $gray-200;
  font-size: $font-size-sm;
  #footer-navs {
    padding: $margin-lg 0;
  }
  padding-bottom: $margin-lg;

  #footer-blurb {
    @extend %small-muted;
    justify-content: center;

    > * {
      margin-right: $margin-md;
      &:last-child {
        margin-right: 0;
      }
    }

  }
}

// Info bar / breadcrumbs
.info-bar {
  background-color: $gray-200;
  .breadcrumb {
    background-color: inherit;
  }
  ol,
  ul {
    margin-bottom: 0;
  }
}

// Main content
.main-content {
  padding-top: $margin-lg;
  padding-bottom: $margin-lg;
}

// Search controls
.search-controls {
  margin-bottom: $margin-md;

  .search-helper-container {
    font-size: $font-size-xs;
  }
}

.search-bar {
  align-items: center;
  margin-bottom: $margin-sm;
}

.selected-facets {
  .selected-facet {
    @extend .badge, .badge-info;

    border: 1px solid darken($info, 7%);

    padding: $margin-xs 0;
    > .facet,
    > .remove-filter {
      padding: $margin-xs;
    }

    .remove-filter {
      color: $black;

      &:hover {
        background-color: rgba(0, 0, 0, .1);
      }
    }
  }

  margin-bottom: $margin-sm;
}

.search-sort {
  font-size: $font-size-sm;
  display: flex;
  flex-direction: row;
  align-items: center;
  ul {
    margin: 0 0 0 $margin-sm;
    @include list-unstyled();
    @include list-inline();
  }

  @include media-breakpoint-up(lg) {
    margin-left: auto;
  }
}

.control-elements .help-inline {
  @extend %small-muted;
}

// General form styling
.control-label .required-input,
.control-elements .help-block.errors,
.control-elements .help-inline.errors {
  color: $red;
}

// User grid
.user-grid {
  .user-grid-item {
    margin-bottom: $list-margin-bottom;

    .user-info-details {
      margin-left: $margin-md;
    }
  }
}

.user-list {
  .user-info {
    margin-bottom: $list-margin-bottom;

    .user-info-details {
      margin-left: $margin-xs;
    }
  }
}

// Search results
.search-result-list {
  margin-bottom: $margin-lg;
}

.search-item {
  h2.search-item-heading {
    text-transform: none;
    margin-bottom: 0;
  }

  .search-item-details,
  .item-children {
    font-size: $font-size-sm;
  }

  .search-item-body {
    font-size: $font-size-base;
    margin-right: $margin-sm;

    .holders {
      @include list-unstyled();
      @include list-inline(" /\00a0");
      font-size: $font-size-sm;
    }

    p {
      margin-bottom: .5rem;
    }

    p+p {
      margin-top: .5rem;
    }
  }

  .search-item-actions {
    margin-left: $margin-sm;
    a:hover {
      text-decoration: none;
    }
  }

  .search-item-footer {
    @include clearfix();

    .list-item-meta,
    .list-item-actions {
      float: right;
      @include list-unstyled();
      @include list-inline();
      @extend %small-muted;
    }
  }

  margin-bottom: $list-margin-bottom;
}

// Annotation lists
.user-annotation-list {
  @include list-unstyled;

  .annotation-meta {
    @extend %small-muted;
    float: right;
  }

  > li {
    padding-bottom: $margin-xs;
    border-bottom: 1px dashed $gray-400;
  }
}

// List export options
ul.list-export-options {
  float: right;
  @include list-unstyled();
  @include list-inline();

  align-items: center;
  font-weight: $font-weight-bold;

  a {
    font-size: $font-size-sm;
    color: $black;
  }

  i:first-child {
    margin-right: $margin-xs;
  }
}

// Child item lists...
.child-items-inline {
  > ol,
  > ul {
    @include list-unstyled();
    margin-left: $margin-lg;
    h5 {
      font-size: $font-size-base;
      margin-bottom: 0;
    }
  }
}

// Other name lists
.other-name-list {
  font-size: $font-size-sm;
  font-weight: $font-weight-bold;

  @include list-unstyled();
  @include list-inline(" /\00a0");
}

// Inline search/filter
.block-header .inline-search-filter {

  @include search-box();
  margin-left: auto;
}

// Sidebar facets
.search-facets {
  .facet-options {
    @include list-unstyled();
    font-size: $font-size-sm;
  }

  .facet-class {
    margin-bottom: $margin-md;
  }
}

.sidepanel-toc {
  position: sticky;
  top: 2rem;
}

.sidebar-section {
  margin-bottom: $margin-lg;
}

// Hide certain sidebar sections except
// on wide widths: FIXME
.sidebar-section.history,
.sidebar-section.export,
.sidebar-section.child-items {
  display: none;

  @include media-breakpoint-up(lg) {
    display: block;
  }
}

// Description list terms
dl dt {
  @extend %heading-text;
  color: $secondary;
  font-weight: 500;
}

// Item pages
.item-header {
  margin-bottom: $margin-md;
}

.item-meta ul {
  @include list-unstyled();
  margin-bottom: 0;
}

.item-text-field-list {
  @include list-unstyled();
}

// Descriptions
.description-holder {
  margin-bottom: $margin-lg;
}
.description-section {
  margin-bottom: $margin-md;
}

.archival-context .ancestor {
  margin-left: $margin-sm;
}

.import-disclaimer {
  @extend %small-muted;
}

// Annotations etc
.annotate-item,
.annotate-field {
  font-size: $font-size-xs;
  &:hover {

  }
}

// Activity stream
#activity-stream {
  > .timeline-event {
    margin-bottom: $list-margin-bottom;
  }
}

.timeline-event {
  > .timeline-body {
    margin-left: $margin-sm;
  }

  .timeline-event-title {
    margin-bottom: 0;
  }

  .timeline-event-time {
    @extend %small-muted;
  }

  .timeline-summary-subjects {
    @include list-unstyled();
    font-size: $font-size-sm;
  }

  .timeline-badge {
    width: 3rem;
    height: 3rem;
    border-radius: 1.5rem;
    background-color: $blue;
    display: flex;
    align-items: center;
    justify-content: center;

    &.success {
      background-color: $success;
    }

    &.info {
      background-color: $info;
    }

    &.warning {
      background-color: $warning;
    }
  }

  @include media-breakpoint-up(md) {
    dl.timeline-summary {
      @include make-row();

      dt {
        @include make-col-ready();
        @include make-col(2);
      }
      dd {
        @include make-col-ready();
        @include make-col(10);
      }
    }
  }
}

#activity-stream-fetchmore {
  @extend .btn;
}

// Annotations
.annotation-set {
  @include media-breakpoint-up(mg) {
    @include make-col-ready();
    @include make-col-offset(3);
    @include make-col(9);
  }

  font-size: $font-size-xs;
  .annotation-list {
    @include list-unstyled();
    margin-bottom: 0;

    > li+li {
      margin-top: $margin-sm;
    }

    > li {
      padding: $margin-xs;
      background-color: $gray-100;
      p {
        margin-bottom: .5rem;
      }
      p + p {
        margin-top: .5rem;
      }
    }

    .annotation-meta {
      a {
        font-size: $font-size-xs;
        @extend %small-muted;
      }

      &:before {
        content: '- ';
      }
    }
  }
}
